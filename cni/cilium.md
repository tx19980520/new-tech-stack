# Cilium

Cilium的出现主要解决两个问题。

1. 使用daemon process对网络的静态配置进行刷新和更新，性能将会影响到集群的进一步扩展，且路由表和iptables的维护对于程序员而言是一个非常头疼的事情。针对此，在通过虚拟机的方式保证内核安全的情况下，使用BPF让对于包的转发等相关逻辑使用代码进行处理。BPF中使用了bytecode，类似java的在虚拟机中执行，也不会影响到宿主机的kernel，却拥有近似kernel的状态。
2. 对于同一Pod中的容器利用socket通信的情况下，需要多次进入到内核网络协议栈，例如穿透TCP/IP，但TCP是用于解决网络拥堵和控流的，例如在sidecar部署模式下，没有什么实际的用途，并且封包拆包会带来较大的性能消耗。针对此，可以使用BPF中的`sockmap`，让sock和sock进行直连，从而极大的提高性能。

