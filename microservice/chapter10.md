# 康威定律和系统设计

本章意在考察组织结构与系统设计的相关问题。

> 任何组织在设计一套系统时，锁交付的设计方案在结构上都与该组织的沟通结构保持一致
>
> 于是产生了著名的“两个披萨团队”，即没有一个团队应该达到两个披萨不够吃

## 服务所有权

服务所有权意味着拥有服务的团队负责对该服务进行更改。只要变更不破坏服务的消费者，团队就可以随时重新组织代码。但是可能我们在某种程度上不得不共享几个服务，在这个时候，拥抱内部开源可能更加合理。如果内部开源，就需要一个maintainer来维护。

> 好的守护者会花费大量的精力与提交者进行清晰的沟通，并对他们的工作方式进行指导。糟糕的守护者会以此为借口，向别人发号施令，或施加类似宗教战争般固执的技术决策。这两种行为我都见过，我可以明确告诉你一件事：无论使用哪种方式，都需要时间。当考虑允许不受信赖的提交者提交更改你的代码库时，你必须做出决定，专门设置一个守护者的开销是否值得。

这个地方主要是回顾曾经的公用数据库的维护，曾经是让一个组员专门负责database-updater这个repo的维护，统一由其进行merge，这确实耗费了该同学较大量的时间，但是因为当时的耦合度实在是太高，无可奈何地需要这样一个角色来进行维持。

## 人

>但如果你从一个单块系统的世界走来，那里的大多数开发人员只需要使用一种语言，并且对运维完全没有意识，那么直接把他们扔进微服务的世界，就像是粗鲁地把他们从单纯的世界中叫醒一样。

> 赋权给开发团队以增加自治也是充满挑战的。过去的人们习惯把工作丢给别人，习惯指责别人，现在让他们对自己的工作完全负责可能会让其感觉不舒服。

> 不考虑当前员工的感受，或不考虑他们现有的能力来提出一个该如何做事的设想，有可能会导致一个糟糕的结果

> 也许在短时间内，你仍需要一个单独的团队来处理线上支持或生产环境的部署，以便给开发人员足够的时间调整到新的实践中。

在项目中确实是出现了如下几种情况

1. 对微服务部署，以及CI/CD的相关问题，没有做过多的考量，则会出现大量的返工，出现相应的问题
2. 在模块的封装对外承诺方面并不重视，常常会出现消费者无法使用生产者信息的情况，并且互相指责是对方的问题。
3. 已经赋权的情况下，仍旧不能自行组织工作，处于即使你不需要对过多细节进行过问，他也会进行上报，并不会自己做决定（基本不存在犹豫的情况）

都需要考虑到人，能不能达到你所需要的要求，尤其是创业公司，最好走上来还是单体，拆分的工作由