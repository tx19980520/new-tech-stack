# 如何建模服务

> 细胞之所以会存在，是因为细胞膜定义了什么在细胞内，什么在细胞外，并且确定了什么物质可以通过细胞膜。
>
> 限界上下文——一个显示便捷限定的特定职责。
>
> 每个限界上下文中的东西分成两部分，一部分不需要与外界通信，另一部分则需要。

微服务是建立在限界上下文之上的，即一个微服务，就像说书一样，得好好的把这一回给说好了，他不能太少，也不能太多，他的内容一部分来自上一回甚至上几回，也会给下几回留下伏笔。这个边界其实没有太多的直接经验能够用于界定，甚至在一定的结构演化上，我们需要的是首先是单体，然后再划分，过早划分其实是对敏捷开发的一种背叛，一定时间点，当单体不再敏捷，我们才需要开始敏捷开发，这才是真正的流程上的精妙的设计。

> 明白应该共享特定的模型，而不应该共享内部表示。

这一点，可能是在springboot中对应的是DTO，数据从持久层到服务层之后，被DTO进一步封装，最终外部能够获取到的“模型”，其实更多的是指DTO，更多属性的暴露，实质上对于实现的暴露。

> 当你在思考组织内的限界上下文时，不应该从共享数据的角度来考虑，而应该从这些上下文能够提供的功能来考虑
>
> 我见过太多只考虑模型而导致贫血的、基于CRUD的服务

这里也要提到，我们在最初设计接口时，其实我们需要先从业务层面上进行设计，或者我们换个概念，就是软件工程中“用例”太细这个概念，太过细的概念，真的会导致上下文的丢失，导致低内聚的出现（因为你只完成了CRUD，但是业务逻辑需要被完成，因此该本微服务实现的业务逻辑其实蔓延到了其他的微服务中，则维护性急剧地降低）。