# 推荐系统bilibili实践

本文主要阐述的是在使用bilibili用户番剧订阅数据进行建模，对用户进行番剧的推荐，我将介绍其中的我使用过的模型，并分析其优劣

## ItemCF-cosine_similarity

这是一个非常原始的算法，主要是得到item x item 的矩阵S，S\[i\]\[j\]表示i，j两个番剧之间的相似度我们通过这个矩阵得到推荐的番剧。

这种做法非常的原始，与之对应的就是结果非常差。

我们后续准备挽救过这种算法，使用过声优对比，名称对比，评分对比，对这个模型进一步挽救，但是最终其效果仍旧不好，10个番剧中仅有一个凭人的直接能感受到是一个比较正常的推荐。

## ItemCF-SVD

这个办法是从斯坦福大学自然语言处理的课程中得到灵感启发的。

我们把一个人所订阅的番剧当作一个window，对这个co-occurrance matrix 进行奇异值分解，取左奇异值的非常小的一个部分，用于描述整个番剧空间。

但问题在于我们非常难消除掉极个别人群对这个番剧向量的贡献，比如某超冷门番剧只有一个人订阅，则该番剧的向量表示很大程度上只由这个人控制，则非常难使之被区分开来

我尝试过调整统计方式，但效果甚微

我进一步尝试给向量手动加上一维星级评价，企图打压我们的冷门番出现概率

效果是出奇的好，这个修正看来非常的必须。

## UserCF-PCA

我们直接使用user-item的矩阵，进行一次PCA，得到的矩阵用于描述我们的用户，通过比对输入用户的数据得到相似度较高的用户的向量，在一定范围内，抽取向量，最终得到结果。

这个算法的精确程度是可以预见的，甚至需要我们主动添加随机来达到长尾效应。

并且由于比对20w用户对于一次http请求来讲时间实在是太长，我们对PCA结果做了多层次聚类，每次比对聚类中心，减少比对次数。

这个算法是上线算法，现网站中使用的就是该算法。

## ItemCF-PCA

试设想我们也可以将上述的矩阵进行转置，来求得我们番剧的PCA结果，这样做不仅会减少很多比对的计算量，还能结合SVD得到的结果。



我们最终的算法是需要通过两重检验的，首先是usercf精心挑选，在之后通过itemCF进行进一步筛选，最终得到我们的模型。



# CNN

打算搞成输入是3401个，输出3401个概率，最后按照概率的大小来进行推荐