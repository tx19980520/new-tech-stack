# Subnet & VLAN

本章节主要就Subnet和VLAN两个概念，讲解两者对于网络的影响。

## VLAN

VLAN的提出主要是解决广播风暴的问题，希望能够在尽可能小的域下进行广播。数据平面上的体现是在MAC层和IP层中添加了相关识别的ID来确认该帧属于某个VLAN。VLAN的概念是在第二层。

## Subnet

子网和子网掩码是一对关系，大部分情况下大家会使用子网掩码和IP结合来描述subnet，子网是一种逻辑划分，便于路由的设计和管理。两个子网下的host是无法直接互联的，必须要借助路由器配置相应的路由规则才可以。Subnet的概念是在第三层。

可以注意到，Subnet和VLAN是两个不同层的概念，他们分别对网络是否互联有着一定的影响。我们对两者进行排列组合，会有如下的几种情况：

**A与B在相同的VLAN，在不同的子网**：

需要路由器才能单播通讯，但是会有广播跨IP子网互相干扰。这种情况没能够隔离网络风暴。

**A与B在相同的VLAN，在相同的子网**：

这是最为常见的情况，常见于小型局域网，完全可以进行任何形式的正常通讯，甚至不需要交换机。

**A与B在不同的VLAN，在不同的子网**：

常见于企业中不同的部门的网络规划，能够通过路由器进行单播，能够隔离网络风暴。

**A与B在不同的VLAN，在相同的子网**：

完全无法通讯，一条铁律就是在不同的VLAN间是无法进行二层的通讯的，则二层以上的通讯也不行。这样的结构能够让我们所有公司的部门都能够通过路由器与外网相连，但是相互之间的网络不会有影响。